[tox]
minversion = 4.0
skipsdist = True
skip_missing_interpreters = True
envlist = cz

[testenv]
passenv =
  DOCKER_HOST
  FORCE_COLOR
  GITHUB_ACTIONS
  GITHUB_WORKSPACE
  NO_COLOR
  PWD
setenv =
  DOCS_SOURCE = docs/source
  DOCS_BUILD = docs/build/html
  VIRTUAL_ENV={envdir}
whitelist_externals = true
usedevelop = True
install_command = pip install {opts} {packages}
isolated_build = True

[testenv:cz]
basepython = python3
deps = -r{toxinidir}/requirements-lint.txt
commands =
  cz check --rev-range XXXXXX..HEAD

# TODO: Setup new docs system
# [testenv:docs]
# description = Builds the docs site. Generated HTML files will be available in '{env:DOCS_BUILD}'.
# deps = -r{toxinidir}/requirements-docs.txt
# commands = sphinx-build -n -W --keep-going -b html {env:DOCS_SOURCE} {env:DOCS_BUILD}
